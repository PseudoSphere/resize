(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{28:function(t,e,a){t.exports=a(68)},33:function(t,e,a){},34:function(t,e,a){},53:function(t,e){},55:function(t,e){},68:function(t,e,a){"use strict";a.r(e);var s=a(0),n=a.n(s),i=a(20),l=a.n(i),o=(a(33),a(21)),c=a(22),r=a(26),d=a(23),h=a(27),u=(a(34),a(24)),m=a.n(u),p=a(25),f=a.n(p),g=function(t){function e(t){var a;return Object(o.a)(this,e),(a=Object(r.a)(this,Object(d.a)(e).call(this,t))).state={raw:null,display:{src:null,default:!0},scrollTop:0,scrollLeft:0,resizedImage:{src:null,width:0,height:0},physicalDistance:"",scale:4,start:{location:[0,0],updated:!1,message:"Select Start"},end:{location:[0,0],updated:!1,message:"Select End"},chooseStart:!0,zoomFactor:0,download:!1},a.pdfPoints=72,a}return Object(h.a)(e,t),Object(c.a)(e,[{key:"updateDisplayImage",value:function(t){var e=t.target.files[0];if(e){var a=new Image,s=URL.createObjectURL(e);a.src=s,this.setState({raw:a,display:{src:s,default:!1},start:{location:[0,0],updated:!1,message:"Select Start"},end:{location:[0,0],updated:!1,message:"Select End"},download:!1,chooseStart:!0})}}},{key:"resize",value:function(){var t=this;if(this.state.display.default)alert("You must select an image first");else if(this.state.start.updated)if(this.state.end.updated)if(this.state.physicalDistance<=0)alert("You must set physical distance");else{var e=this.state.start.location[0]-this.state.end.location[0],a=this.state.start.location[1]-this.state.end.location[1],s=Math.sqrt(Math.pow(e,2)+Math.pow(a,2))/this.pdfPoints,n=this.state.physicalDistance/s/this.state.scale,i=this.state.raw.width*n,l=this.state.raw.height*n,o=2*this.pdfPoints,c=new m.a({size:[i+o,l+o]}),r=c.pipe(f()()),d=document.createElement("canvas"),h=this.state.raw;d.width=h.width,d.height=h.height,d.getContext("2d").drawImage(h,0,0,d.width,d.height);var u=d.toDataURL();c.image(u,o/2,o/2,{width:i}),c.end(),r.on("finish",function(){var e=r.toBlobURL("application/pdf");t.setState({resizedImage:{src:e,width:i,height:l},zoomFactor:n,download:!0})})}else alert("You must select an ending point");else alert("You must select a starting point")}},{key:"updatePhysical",value:function(t){this.setState({physicalDistance:t.target.value,download:!1})}},{key:"updateScale",value:function(t){this.setState({scale:t.target.value,download:!1})}},{key:"startActive",value:function(){this.setState({chooseStart:!0})}},{key:"endActive",value:function(){this.setState({chooseStart:!1})}},{key:"updateDisplay",value:function(t){var e=t.target;if("IMG"===e.tagName){for(var a=e,s=0,n=0;null!=a;s+=a.offsetLeft,n+=a.offsetTop,a=a.offsetParent);var i=t.pageX-s+this.state.scrollLeft,l=t.pageY-n+this.state.scrollTop;this.state.chooseStart?(this.state.start.updated||this.setState({chooseStart:!1}),this.setState({start:{message:"Re-select Start",updated:!0,location:[i,l]}},this._redrawDisplay)):this.setState({end:{message:"Re-select End",updated:!0,location:[i,l]}},this._redrawDisplay)}}},{key:"_redrawDisplay",value:function(){var t=!0,e=document.createElement("canvas"),a=this.state.raw;e.width=a.width,e.height=a.height;var s=e.getContext("2d");if(s.lineWidth=5,s.drawImage(a,0,0,e.width,e.height),this.state.start.updated?this._drawPoint(e,this.state.start.location):t=!1,this.state.end.updated?this._drawPoint(e,this.state.end.location):t=!1,t){s.beginPath();var n=this.state.start.location,i=this.state.end.location;s.moveTo(n[0],n[1]),s.lineTo(i[0],i[1]),s.stroke()}this.setState({display:{src:e.toDataURL("image/jpeg"),default:!1},download:!1})}},{key:"_drawPoint",value:function(t,e){var a=t.getContext("2d");a.beginPath(),a.arc(e[0],e[1],5,0,2*Math.PI),a.fill(),a.beginPath(),a.arc(e[0],e[1],20,0,2*Math.PI),a.stroke()}},{key:"trackScroll",value:function(t){this.setState({scrollTop:t.target.scrollTop,scrollLeft:t.target.scrollLeft})}},{key:"render",value:function(){var t=this;return n.a.createElement("div",{className:"App"},n.a.createElement("div",null,n.a.createElement("input",{type:"file",id:"file",style:{display:"none"},onChange:function(e){return t.updateDisplayImage(e)}}),n.a.createElement("label",{htmlFor:"file",className:"fancy-blue-button",accept:"image/*"},"Select Image")),n.a.createElement("div",{className:"giant-image",onClick:function(e){return t.updateDisplay(e)},onScroll:function(e){return t.trackScroll(e)}},n.a.createElement("img",{src:this.state.display.src,alt:""})),n.a.createElement("div",null,n.a.createElement("button",{className:"fancy-blue-button",onClick:function(){return t.startActive()}},this.state.start.message),n.a.createElement("button",{className:"fancy-blue-button",onClick:function(){return t.endActive()}},this.state.end.message)),n.a.createElement("div",{className:"resize-settings"},n.a.createElement("div",null,"Physical Distance (ft): ",n.a.createElement("input",{value:this.state.physicalDistance,onChange:function(e){return t.updatePhysical(e)}})),n.a.createElement("div",null,"Desired Scale (Feet Per Inch): ",n.a.createElement("input",{value:this.state.scale,onChange:function(e){return t.updateScale(e)}}))),n.a.createElement("div",null,n.a.createElement("button",{className:"fancy-blue-button",onClick:function(){return t.resize()}},"Resize")),this.state.download&&n.a.createElement("div",null,n.a.createElement("p",null,"Zoom Factor: ",Math.round(100*this.state.zoomFactor)/100),n.a.createElement("p",null,"Size on Paper:",Math.round(this.state.resizedImage.width/this.pdfPoints*100)/100,'" x',Math.round(this.state.resizedImage.height/this.pdfPoints*100)/100,'"')),n.a.createElement("div",null,n.a.createElement("a",{href:this.state.resizedImage.src,download:!0},n.a.createElement("button",{className:"fancy-blue-button",disabled:!this.state.download},"Download"))))}}]),e}(n.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(n.a.createElement(g,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[28,1,2]]]);
//# sourceMappingURL=main.90ec8445.chunk.js.map